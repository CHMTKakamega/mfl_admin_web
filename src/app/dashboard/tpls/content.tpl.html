<section class="section row">
    <div ui-view="header"></div>
    <div class="content fade-content">
        <contentheader hide-back-button></contentheader>
        <div class="col-xs-12 margin-t-20">
            <div class="col-md-6 col-sm-12 pad-0">
                <div class="col-xs-12 content-card margin-b-5" style="border-bottom: 1px solid #e0e0e0;">
                    <h4 class="fw-600 fs-16 margin-t-5 col-sm-5 pad-l-0">
                        Recently Added
                    </h4>
                    <span class="text-right col-sm-7 pad-r-0">
                        <button class="btn btn-xs btn-rounded btn-warning fs-12" ng-click="weekly()">Last Week</button>
                        <button class="btn btn-xs btn-rounded btn-warning fs-12" ng-click="monthly()">Last Month</button>
                        <button class="btn btn-xs btn-rounded btn-warning fs-12" ng-click="quarterly()">Last Quarter</button>
                    </span>
                    <div class="col-xs-12 pad-l-0" style="background-color: #f1f1f4;">
                        <p class="margin-l-3 margin-t-5">
                            <span ng-if="!recent_spinner" class="pad-0 fs-16">
                                Facilities: <i><b>{{ summary.recently_created }}</b></i>  <br>
                                Community Health Units: <i><b>{{ summary.recently_created_chus }}</b></i>
                            </span>
                            <span ng-if="recent_spinner" class="fs-18 pad-l-20">
                                <i class="fa fa-circle-o-notch fa-spin">
                                </i>
                            </span>
                        </p>
                    </div>
                </div>
                <div class="content-card col-xs-12" requires-permission="facilities.view_facility,facilities.add_facilityapproval">
                    <div class="col-md-1 col-sm-1 margin-r-10 pad-l-0 hidden-xs text-center">
                        <i class="fa fa-users fa-2x icon-circles margin-t-10"></i>
                    </div>
                    <div class="col-xs-9 pad-r-0 text-left pad-l-4" ng-if="user.groups.length!==0">
                        <h4 class="fw-600 margin-b-0">Job Title</h4>
                        <p class="fs-14">
                            {{user.job_title}}
                        </p>
                    </div>
                </div>
            </div><!--/col-->
            <!-- Showing national admin is at national level -->
            <div class="col-md-6 col-xs-12 pad-r-0" ng-if="user.is_national">
                <div class="col-xs-12 content-card margin-b-5">
                    <div class="col-md-1 col-sm-1 margin-r-10 pad-l-0  hidden-xs text-center">
                        <i class="fa fa-map-marker fa-2x icon-circles pad-icon margin-t-10"></i>
                    </div>
                    <div class="col-xs-9 pad-r-0 text-left pad-l-0">
                        <h4 class="fw-600 margin-b-0">National</h4>
                        <p class="fs-12 margin-b-5">
                            National Level Access
                        </p>
                    </div>
                </div>
             </div>
            <div class="col-md-6 col-xs-12 pad-r-0">
                <!-- Total facilities -->
                <div class="col-xs-12 margin-b-5 content-card" style="border-bottom: 1px solid #e0e0e0;">
                    <div class="col-xs-4">
                        <a ui-sref="facilities">
                            <h4 class="text-center">
                                    Total Facilities <br>
                                    <i ng-if="spinner" class="fa fa-circle-o-notch fa-spin"></i>
                                    <b ng-if="!spinner" class="margin-t-10">{{summary.total_facilities }}</b>
                            </h4>
                        </a>
                    </div>
                    <div class="col-xs-4">
                        <a ui-sref="facility_reject_list">
                            <h4 class="text-center">
                                    Rejected Facilities <br>
                                    <i ng-if="spinner" class="fa fa-circle-o-notch fa-spin"></i>
                                    <b ng-if="!spinner" class="margin-t-10">{{summary.rejected_facilities_count }}</b>
                            </h4>
                        </a>
                    </div>
                    <div class="col-xs-4">
                        <a ui-sref="facilities_closed">
                            <h4 class="text-center">
                                    Closed Facilities <br>
                                    <i ng-if="spinner" class="fa fa-circle-o-notch fa-spin"></i>
                                    <b ng-if="!spinner" class="margin-t-10">{{summary.closed_facilities_count }}</b>
                            </h4>
                        </a>
                    </div>
                </div>
                <!-- Facilities with updates pending approval -->
                <a ui-sref="facilities_approve" style="cursor: pointer" requires-permission="facilities.view_facility,facilities.add_facilityapproval">
                <div class="col-xs-12 margin-b-5 content-card ">
                    <div class="col-xs-12 text-left margin-t--5 pad-r-0 pad-l-0" tooltip="Click to view facilities with pending updates">
                        <h4 class="fw-600 ">
                            <span class="fs-20 text-black" style="font-family : 'Lato Light', sans-serif;">
                                #{{summary.pending_updates}} Facilities Pending Approval
                                <br/>
                                <span class="fs-14">
                                    Pending approval <span ng-if="user.county_name">in {{user.county_name | titlecase}} County</span>
                                </span>
                            </span>
                            <span class="fs-18 pull-right text-warning margin-t--27" style="font-family : 'Lato Light', sans-serif;">
                                <i class="fa fa-dot-circle-o fa-3x"></i>
                            </span>
                        </h4>
                    </div>
                </div>
                </a>
            </div>
            <div class="col-xs-12 pad-0" ng-if="user.groups.length!==0">
                <div class="col-sm-6 pad-0 margin-b-5" ng-if="user.user_counties.length!==0">
                    <div class="content-card col-xs-12">
                        <div class="col-md-1 col-sm-1 margin-r-10 pad-l-0  hidden-xs text-center">
                            <i class="fa fa-map-marker fa-2x icon-circles pad-icon margin-t-10"></i>
                        </div>
                        <div class="col-xs-9 pad-l-4 pad-r-0 text-left">
                            <h4 class="fw-600 margin-b-0">Assigned Counties</h4>
                            <p ng-repeat="c in user.user_counties" class="fs-12">
                                {{c.county_name | titlecase}}
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 margin-b-5 pad-0" ng-if="user.user_constituencies.length!==0">
                    <div class="content-card col-xs-12">
                        <div class="col-sm-1 margin-r-10 pad-l-0  hidden-xs text-center">
                            <i class="fa fa-map-marker fa-2x icon-circles pad-icon margin-t-10"></i>
                        </div>
                        <div class="col-xs-9 pad-r-0 text-left pad-l-0">
                            <h4 class="fw-600 margin-b-0">Assigned Sub-Counties</h4>
                            <p ng-repeat="c in user.user_constituencies" class="fs-12 margin-b-5">
                                {{c.constituency_name | titlecase}}
                            </p>
                        </div>
                    </div>
                </div>
            </div><!--/col-->
        </div>
        <div class="col-xs-12" style="background-color: #f4f4f6;"  ng-hide="(summary.county_summary.length==0) && (summary.constituencies_summary.length==0) && (summary.wards_summary.length==0)">
                <div class="col-xs-12 content-card">
                    <div class="">
                        <h3 class="text-center dash" ng-if="!spinner">
                           Number of health facilities AND CHUs by
                            <span ng-if="ward">Ward</span>
                            <span ng-if="constituency">Sub-County</span>
                            <span ng-if="county">County</span>
                            <span ng-if="user.constituency_name">
                                in {{user.constituency_name | titlecase}} Sub-county
                            </span>
                            <span ng-if="user.county_name">
                                in {{user.county_name | titlecase}} County
                            </span>
                        </h3>
                    </div>
                    <div ng-if="spinner" class="col-xs-12 text-center margin-t-20 margin-b-20 fs-18">
                        <i class="fa fa-circle-o-notch fa-spin fa-2x"></i>
                    </div>
                    <div class="panel-body">
                        <div id="facilitybar">
                        </div>
                    </div>
                </div>
        </div>
        <div class="col-xs-12 pad-0">
            <div class="col-md-5">
                <div class="col-xs-12 content-card">
                    <h3 class="text-center dash">Facility Owner Categories</h3>
                    <div ng-if="spinner" class="col-xs-12 text-center margin-t-20 margin-b-20 fs-18">
                        <i class="fa fa-circle-o-notch fa-spin fa-2x"></i>
                    </div>
                    <div class="panel-body">
                        <div id="chartowners">
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-7">
                <div class="col-xs-12 content-card">
                    <h3 class="text-center dash">Facility Types</h4>
                    <div ng-if="spinner" class="col-xs-12 text-center margin-t-20 margin-b-20 fs-18">
                        <i class="fa fa-circle-o-notch fa-spin fa-2x"></i>
                    </div>
                    <div class="panel-body">
                        <div id="chartfacility">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
